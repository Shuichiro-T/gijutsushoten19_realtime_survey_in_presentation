# 画面一覧

本システムの画面構成について、画面名称、対象ユーザ、使用用途を記載します。

## プレゼンター用画面

### プレゼンテーション指定画面
- **対象ユーザ**: プレゼンター
- **使用用途**: プレゼンテーション資料の共有URL入力と設定
- **主な機能**:
  - Google Slides共有URLの入力
  - プレゼンテーション開始の制御
  - 使用方法の案内表示

### プレゼンテーション画面
- **対象ユーザ**: プレゼンター
- **使用用途**: プレゼンテーション資料の表示とアンケート結果のリアルタイム表示
- **主な機能**:
  - スライド表示（Google Slides埋め込み）
  - 全画面表示対応
  - **アンケート結果のリアルタイム表示** (v2.2対応)
    - **イベントIDベースのアンケート自動取得機能**
      - `/api/surveys/events/{eventId}/surveys` エンドポイントからアンケート一覧を取得
      - イベントに紐づく全アンケートの自動読み込み
      - アンケートID、タイトル、質問内容の動的表示
    - **取得したアンケートIDでのリアルタイム結果表示**
      - `/api/surveys/events/{eventId}/surveys/{surveyId}/results` エンドポイントでアンケート結果取得
      - 複数アンケート間のナビゲーション機能
      - 選択肢別の回答数とパーセンテージ表示
      - プログレスバーによる視覚的な結果表示
      - 5秒間隔での自動更新
    - リアルタイムアンケート結果の表示・非表示切り替え
  - キーボードショートカット（Esc: 終了、F11: 全画面、S: アンケート結果表示切り替え、←→: アンケート切り替え）
- **技術仕様**:
  - React Hooksによる状態管理
  - RESTful API通信による動的データ取得
  - リアルタイムAPIポーリング（5秒間隔）
  - CSS3アニメーションによるスムーズなUI遷移
  - レスポンシブデザイン対応
  - アクセシビリティ対応（キーボードナビゲーション）
- **データフロー** (v2.2更新):
  1. propsでeventIdを受け取り
  2. `/api/surveys/events/{eventId}/surveys` からアンケート一覧を取得
  3. 取得したアンケートIDを使用して結果を定期取得
  4. リアルタイムでアンケート結果をプレゼンテーション画面に表示

### アンケート管理画面
- **対象ユーザ**: プレゼンター
- **使用用途**: アンケート問題の作成・編集・管理
- **主な機能**:
  - アンケート問題の登録・編集
  - 選択肢の設定
  - アンケートの公開・非公開設定
  - 結果のエクスポート

## 観客用画面

### アンケート回答画面
- **対象ユーザ**: 観客
- **使用用途**: リアルタイムアンケートへの回答
- **アクセス方法**: `/events/{eventId}/surveys/{surveyId}` でURL直接アクセス
- **対応デバイス**: スマートフォン対応（レスポンシブデザイン）
- **主な機能**:
  - パスパラメータによるイベントID・アンケートID取得
  - **動的アンケート読み込み機能** (v2.0対応)
    - バックエンドAPIからリアルタイムでアンケート情報を取得
    - `/api/surveys/events/{eventId}/surveys/{surveyId}` エンドポイントを使用
    - 事前にテーブルに格納されたアンケートデータの動的表示
  - 選択肢アンケートへの対応 (現在は単一選択のみ)
    - 複数選択（ラジオボタン）
    - データベースから取得した選択肢の動的表示
  - 必須項目バリデーション機能
  - リアルタイム入力検証
  - 回答送信とローディング状態表示
    - `/api/surveys/responses` エンドポイントへの送信
    - 選択肢IDベースでの回答保存
  - エラーハンドリング（アンケート未存在・終了済み・送信エラー）
  - 送信完了画面の表示
- **技術仕様**:
  - React Router v6によるルーティング
  - TypeScriptによる型安全性
  - CSS-in-JSによるスタイリング
  - モバイルファーストレスポンシブデザイン
  - Fetch APIを使用したRESTful API通信
- **データフロー**:
  1. URL パラメータからeventId・surveyIdを抽出
  2. バックエンドAPIからアンケート情報を取得
  3. 取得したデータを内部Survey型に変換して表示
  4. ユーザーの回答を収集・バリデーション
  5. 選択肢IDと共にバックエンドに回答を送信

### プレゼンテーション閲覧画面
- **対象ユーザ**: 観客
- **使用用途**: プレゼンテーション内容の閲覧（オプション）
- **主な機能**:
  - スライドの同期表示
  - アンケートへのアクセス
  - 接続状況の確認

## 管理者用画面

### システム管理画面
- **対象ユーザ**: 管理者
- **使用用途**: システム全体の設定と監視
- **主な機能**:
  - ユーザー管理
  - セッション監視
  - システム設定
  - ログ確認

### 統計・分析画面
- **対象ユーザ**: 管理者
- **使用用途**: アンケート結果の詳細分析
- **主な機能**:
  - 回答データの詳細分析
  - 統計レポートの生成
  - データのエクスポート
  - 履歴データの管理

## 共通画面

### ログイン画面
- **対象ユーザ**: 全ユーザ
- **使用用途**: システムへの認証
- **主な機能**:
  - 認証情報の入力
  - セッション管理
  - パスワードリセット

### エラー画面
- **対象ユーザ**: 全ユーザ
- **使用用途**: エラー発生時の案内
- **主な機能**:
  - エラー内容の表示
  - 復旧方法の案内
  - サポート窓口の案内